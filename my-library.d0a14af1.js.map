{"mappings":"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","sources":["src/my-library.js","src/js/renderCardsMyLibrary.js","src/js/btnWatchedQueue.js"],"sourcesContent":["import ApiServiselibrary from './js/API';\n//import { renderCardsLibrary } from './js/renderCards';\n//import { showModalLibrary } from './js/film-modal';\nimport { onOpenTeamModal } from './js/team-modal.js';\nimport { switcher } from './js/switcher';\nimport { onQueuedBtn, onWatchedBtn } from './js/btnWatchedQueue.js';\nimport { spiner, spinerRemove, noInfo } from './js/notifications';\nimport trailer from './js/film-trailer.js';\nimport { showModal } from './js/film-modal';\n\nexport const refs = {\n  cardHolderLibrary: document.querySelector('.card-holder'),\n  footerLink: document.querySelector('.footer__link'),\n  stickyHeaderMyLibrary: document.querySelector(\n    '.js-my-library-header__sticky'\n  ),\n  watchedBtn: document.querySelector('.js-watched'),\n  queuedBtn: document.querySelector('.js-queue'),\n  movieModal: document.querySelector('.js-movie-modal'),\n};\n\nconst stickyMyLibrary = (window.onscroll = function showHeaderMyLibrary() {\n  if (window.pageYOffset > 200) {\n    refs.stickyHeaderMyLibrary.classList.add('my-library-header__sticky');\n  } else {\n    refs.stickyHeaderMyLibrary.classList.remove('my-library-header__sticky');\n  }\n});\n\nconst apiServise = new ApiServiselibrary();\n\nrefs.footerLink.addEventListener('click', onOpenTeamModal);\nrefs.cardHolderLibrary.addEventListener('click', onCardClick);\nrefs.watchedBtn.addEventListener('click', onWatched);\nrefs.queuedBtn.addEventListener('click', onQueued);\nrefs.movieModal.addEventListener('click', onModalClick);\n\n// Початкове завантаження\nonWatchedBtn();\n\nfunction onWatched(e) {\n  if (e.target.classList.contains('my-library-header__button--current')) return;\n\n  e.target.classList.add('my-library-header__button--current');\n  refs.queuedBtn.classList.remove('my-library-header__button--current');\n  refs.cardHolderLibrary.innerHTML = '';\n  onWatchedBtn();\n}\n\nfunction onQueued(e) {\n  if (e.target.classList.contains('my-library-header__button--current')) return;\n\n  e.target.classList.add('my-library-header__button--current');\n  refs.watchedBtn.classList.remove('my-library-header__button--current');\n  refs.cardHolderLibrary.innerHTML = '';\n  onQueuedBtn();\n}\n\nfunction onCardClick(e) {\n  if (e.target === e.currentTarget) return;\n\n  if (e.target.classList.contains('film__trailer-btn'))\n    return trailer.showTrailer(e.target.closest('li').id);\n\n  apiServise.movieId = e.target.closest('li').id;\n  spiner();\n  apiServise.fetchById().then(data => {\n    showModal(data.data);\n    spinerRemove();\n  });\n}\n\n// Перезавантаження сторінки бібліотеки після видалення фільму\nfunction onModalClick(e) {\n  if (\n    e.target.classList.contains('add-watched') &&\n    refs.watchedBtn.classList.contains('my-library-header__button--current')\n  ) {\n    refs.cardHolderLibrary.innerHTML = '';\n    onWatchedBtn();\n  }\n  if (\n    e.target.classList.contains('add-queue') &&\n    refs.queuedBtn.classList.contains('my-library-header__button--current')\n  ) {\n    refs.cardHolderLibrary.innerHTML = '';\n    onQueuedBtn();\n  }\n}\n","import { refs } from '../my-library';\n\nexport function renderCards(obj) {\n  const markup = obj\n    .map(O => {\n      return `<li class=\"film__item\" id=\"${O.id}\"><a class=\"film__item__link\">\n                ${getMarkupImgPoster(O.poster_path, O.name, O.title)}\n                <h2>${getShortName(O.title || O.name)}</h2>\n                <p> ${getGenresByID(O.genres)} | ${getYear(O.release_date)}</p>\n                <button class=\"film__trailer-btn\" type=\"button\">Trailer <span class=\"film__trailer-btn\">&#9654;</span></button>\n              </a>\n            </li>`;\n    })\n    .join('');\n  // refs.cardHolderLibrary.insertAdjacentHTML('beforeend', markup);\n  refs.cardHolderLibrary.innerHTML = markup;\n}\n\nexport const genreIdName = [\n  { id: 28, name: 'Action' },\n  { id: 12, name: 'Adventure' },\n  { id: 16, name: 'Animation' },\n  { id: 35, name: 'Comedy' },\n  { id: 80, name: 'Crime' },\n  { id: 99, name: 'Documentary' },\n  { id: 18, name: 'Drama' },\n  { id: 10751, name: 'Family' },\n  { id: 14, name: 'Fantasy' },\n  { id: 36, name: 'History' },\n  { id: 27, name: 'Horror' },\n  { id: 10402, name: 'Music' },\n  { id: 9648, name: 'Mystery' },\n  { id: 10749, name: 'Romance' },\n  { id: 878, name: 'Science Fiction' },\n  { id: 10770, name: 'TV Movie' },\n  { id: 53, name: 'Thriller' },\n  { id: 10752, name: 'War' },\n  { id: 37, name: 'Western' },\n];\n\nexport function getGenresByID(genreIds) {\n  const newArr = [];\n  genreIdName.map(genre => {\n    for (const id of genreIds) {\n      if (genre.id === id) {\n        newArr.push(genre.name);\n      }\n    }\n  });\n  if (newArr.length >= 2) {\n    const slisedArr = newArr.slice(0, 2);\n    slisedArr[2] = 'Other';\n    return slisedArr;\n  } else {\n    return 'Other';\n  }\n}\n\nexport function getShortName(string) {\n  if (string) {\n    if (string.length >= 32) {\n      return string.substr(0, 25) + '...';\n    }\n    return string;\n  }\n}\n\nexport function getYear(date) {\n  return date ? date.split('-')[0] : '2022';\n}\n\nexport function getPosterPath(path) {\n  return `https://www.themoviedb.org/t/p/w500${path}`;\n  // return path\n  //   ? `https://www.themoviedb.org/t/p/w500${path}`\n  //   : 'https://www.mysafetysign.com/img/lg/S/post-no-bills-sign-st-0124.png';\n}\n\nexport function getMarkupImgPoster(poster_path, name, title) {\n  return poster_path\n    ? `<img src=\" ${getPosterPath(poster_path)}\" alt=\"${\n        name || title\n      }\" loading=\"lazy\" />`\n    : ``;\n}\n","import { renderCards } from './renderCardsMyLibrary';\nimport { spiner, spinerRemove, noInfo } from '../js/notifications';\n\n// const watchedBtn = document.querySelector('.js-watched');\n// const queuedBtn = document.querySelector('.js-queue');\n// watchedBtn.addEventListener('click', onWatchedBtn);\n// queuedBtn.addEventListener('click', onQueuedBtn);\n\nconst WATCHED = 'movies-watched';\nconst QUEUE = 'movies-queue';\n// Заглушки порожньої сторінки\nconst img = document.querySelector('.empty__page');\nconst text = document.querySelector('.empty__page-text');\n\nexport function onWatchedBtn() {\n  img.classList.add('is-hidden');\n  text.classList.add('is-hidden');\n\n  spiner();\n  const obj = JSON.parse(localStorage.getItem(WATCHED));\n  if (obj?.length) {\n    renderCards(obj);\n    spinerRemove();\n  } else {\n    img.classList.remove('is-hidden');\n    text.classList.remove('is-hidden');\n    spinerRemove();\n  }\n  // watchedBtn.removeEventListener('click', onWatchedBtn);\n}\n\nexport function onQueuedBtn() {\n  img.classList.add('is-hidden');\n  text.classList.add('is-hidden');\n\n  spiner();\n  const obj = JSON.parse(localStorage.getItem(QUEUE));\n  if (obj?.length) {\n    renderCards(obj);\n    spinerRemove();\n  } else {\n    img.classList.remove('is-hidden');\n    text.classList.remove('is-hidden');\n    spinerRemove();\n  }\n  // queuedBtn.removeEventListener('click', onQueuedBtn);\n}\n"],"names":["$cTOKP","parcelRequire","$9d606634172bec5e$export$e483d52d8d6686e1","obj","markup","map","O","id","poster_path","name","title","path","string","length","substr","$9d606634172bec5e$export$a01ab454399a8a2c","genreIds","newArr","$9d606634172bec5e$export$b988f5599209187e","genre","push","slisedArr","slice","$9d606634172bec5e$export$f161907cccfac066","genres","date","release_date","split","join","$fc8e7c71b3b7ed96$export$21666b427502ea6d","cardHolderLibrary","innerHTML","$6e6d7532a610e7a5$var$img","document","querySelector","$6e6d7532a610e7a5$var$text","$6e6d7532a610e7a5$export$f7660da9a1a3fc30","classList","add","$2Dfe2","spiner","JSON","parse","localStorage","getItem","spinerRemove","remove","$6e6d7532a610e7a5$export$25632d83bbfd321f","footerLink","stickyHeaderMyLibrary","watchedBtn","queuedBtn","movieModal","$fc8e7c71b3b7ed96$var$apiServise","window","onscroll","pageYOffset","default","addEventListener","$baGT8","onOpenTeamModal","e","target","currentTarget","contains","$eAoKO","showTrailer","closest","movieId","fetchById","then","data","$422V3","showModal"],"version":3,"file":"my-library.d0a14af1.js.map"}