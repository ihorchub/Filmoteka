{"mappings":"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","sources":["src/my-library.js","src/js/renderCardsMyLibrary.js","src/js/btnWatchedQueue.js"],"sourcesContent":["import ApiServiselibrary from './js/API';\n//import { renderCardsLibrary } from './js/renderCards';\n//import { showModalLibrary } from './js/film-modal';\nimport { onOpenTeamModal } from './js/team-modal.js';\nimport { switcher } from './js/switcher';\nimport { onQueuedBtn, onWatchedBtn } from './js/btnWatchedQueue.js';\nimport { spiner, spinerRemove, noInfo } from './js/notifications';\nimport trailer from './js/film-trailer.js';\nimport { showModal } from './js/film-modal';\nimport { onSubmitScroll } from './js/onSubmit.js';\n\nexport const refs = {\n  cardHolderLibrary: document.querySelector('.card-holder'),\n  footerLink: document.querySelector('.footer__link'),\n  stickyHeaderMyLibrary: document.querySelector(\n    '.js-my-library-header__sticky'\n  ),\n  watchedBtn: document.querySelector('.js-watched'),\n  queuedBtn: document.querySelector('.js-queue'),\n  movieModal: document.querySelector('.js-movie-modal'),\n  pagination: document.querySelector('.pagination__container'),\n};\n\nconst stickyMyLibrary = (window.onscroll = function showHeaderMyLibrary() {\n  if (window.pageYOffset > 200) {\n    refs.stickyHeaderMyLibrary.classList.add('my-library-header__sticky');\n  } else {\n    refs.stickyHeaderMyLibrary.classList.remove('my-library-header__sticky');\n  }\n});\n\nconst apiServise = new ApiServiselibrary();\n\nrefs.footerLink.addEventListener('click', onOpenTeamModal);\nrefs.cardHolderLibrary.addEventListener('click', onCardClick);\nrefs.watchedBtn.addEventListener('click', onWatched);\nrefs.queuedBtn.addEventListener('click', onQueued);\nrefs.movieModal.addEventListener('click', onModalClick);\nrefs.pagination.addEventListener('click', onPagination);\n\n// Початкове завантаження\nonWatchedBtn();\n\nfunction onWatched(e) {\n  if (e.target.classList.contains('my-library-header__button--current')) return;\n\n  e.target.classList.add('my-library-header__button--current');\n  refs.queuedBtn.classList.remove('my-library-header__button--current');\n  refs.cardHolderLibrary.innerHTML = '';\n  onWatchedBtn(1);\n}\n\nfunction onQueued(e) {\n  if (e.target.classList.contains('my-library-header__button--current')) return;\n\n  e.target.classList.add('my-library-header__button--current');\n  refs.watchedBtn.classList.remove('my-library-header__button--current');\n  refs.cardHolderLibrary.innerHTML = '';\n  onQueuedBtn(1);\n}\n\nfunction onCardClick(e) {\n  if (e.target === e.currentTarget) return;\n\n  if (e.target.classList.contains('film__trailer-btn'))\n    return trailer.showTrailer(e.target.closest('li').id);\n\n  apiServise.movieId = e.target.closest('li').id;\n  spiner();\n  apiServise.fetchById().then(data => {\n    showModal(data.data);\n    spinerRemove();\n  });\n}\n\n// Перезавантаження сторінки бібліотеки після видалення фільму\nfunction onModalClick(e) {\n  if (\n    e.target.classList.contains('add-watched') &&\n    refs.watchedBtn.classList.contains('my-library-header__button--current')\n  ) {\n    const cards = refs.cardHolderLibrary.children.length;\n    refs.cardHolderLibrary.innerHTML = '';\n    onWatchedBtn(\n      Number(\n        document.querySelector('.pagination__item--current') && cards === 1\n          ? document.querySelector('.pagination__item--current').id - 1\n          : 0\n      )\n    );\n  }\n  if (\n    e.target.classList.contains('add-queue') &&\n    refs.queuedBtn.classList.contains('my-library-header__button--current')\n  ) {\n    const cards = refs.cardHolderLibrary.children.length;\n    refs.cardHolderLibrary.innerHTML = '';\n    onQueuedBtn(\n      Number(\n        document.querySelector('.pagination__item--current') && cards === 1\n          ? document.querySelector('.pagination__item--current').id - 1\n          : 0\n      )\n    );\n  }\n}\n\n// Відстежування пагінації\nfunction onPagination(e) {\n  if (e.target === e.currentTarget || e.target.nodeName === 'UL') return;\n\n  let id = null;\n  if (\n    e.target.nodeName === 'svg' ||\n    e.target.nodeName === 'BUTTON' ||\n    e.target.nodeName === 'path'\n  ) {\n    if (\n      e.target.closest('button').classList.contains('pagination__left-btn') &&\n      e.target.closest('button').classList.contains('on')\n    )\n      id = Number(document.querySelector('.pagination__item--current').id) - 1;\n    else if (\n      e.target.closest('button').classList.contains('pagination__right-btn') &&\n      e.target.closest('button').classList.contains('on')\n    )\n      id = Number(document.querySelector('.pagination__item--current').id) + 1;\n    else return;\n  } else {\n    if (!isNaN(e.target.closest('li').id))\n      id = Number(e.target.closest('li').id);\n    else if (e.target.closest('li').id === '...')\n      return apiServise.query ? successPages(1, 1) : successPages(1);\n    else return;\n  }\n\n  if (\n    refs.watchedBtn.classList.contains('my-library-header__button--current')\n  ) {\n    onSubmitScroll();\n    onWatchedBtn(id);\n  } else {\n    onSubmitScroll();\n    onQueuedBtn(id);\n  }\n}\n","import { refs } from '../my-library';\n\nexport function renderCards(obj) {\n  const markup = obj\n    .map(O => {\n      return `<li class=\"film__item\" id=\"${O.id}\"><a class=\"film__item__link\">\n                ${getMarkupImgPoster(O.poster_path, O.name, O.title)}\n                <h2>${getShortName(O.title || O.name)}</h2>\n                <p> ${getGenresByID(O.genres)} | ${getYear(O.release_date)}</p>\n                <button class=\"film__trailer-btn\" type=\"button\">Trailer <span class=\"film__trailer-btn\">&#9654;</span></button>\n              </a>\n            </li>`;\n    })\n    .join('');\n  // refs.cardHolderLibrary.insertAdjacentHTML('beforeend', markup);\n  refs.cardHolderLibrary.innerHTML = markup;\n}\n\nexport const genreIdName = [\n  { id: 28, name: 'Action' },\n  { id: 12, name: 'Adventure' },\n  { id: 16, name: 'Animation' },\n  { id: 35, name: 'Comedy' },\n  { id: 80, name: 'Crime' },\n  { id: 99, name: 'Documentary' },\n  { id: 18, name: 'Drama' },\n  { id: 10751, name: 'Family' },\n  { id: 14, name: 'Fantasy' },\n  { id: 36, name: 'History' },\n  { id: 27, name: 'Horror' },\n  { id: 10402, name: 'Music' },\n  { id: 9648, name: 'Mystery' },\n  { id: 10749, name: 'Romance' },\n  { id: 878, name: 'Science Fiction' },\n  { id: 10770, name: 'TV Movie' },\n  { id: 53, name: 'Thriller' },\n  { id: 10752, name: 'War' },\n  { id: 37, name: 'Western' },\n];\n\nexport function getGenresByID(genreIds) {\n  const newArr = [];\n  genreIdName.map(genre => {\n    for (const id of genreIds) {\n      if (genre.id === id) {\n        newArr.push(genre.name);\n      }\n    }\n  });\n  if (newArr.length >= 2) {\n    const slisedArr = newArr.slice(0, 2);\n    slisedArr[2] = 'Other';\n    return slisedArr;\n  } else {\n    return 'Other';\n  }\n}\n\nexport function getShortName(string) {\n  if (string) {\n    if (string.length >= 32) {\n      return string.substr(0, 25) + '...';\n    }\n    return string;\n  }\n}\n\nexport function getYear(date) {\n  return date ? date.split('-')[0] : '2022';\n}\n\nexport function getPosterPath(path) {\n  return `https://www.themoviedb.org/t/p/w500${path}`;\n  // return path\n  //   ? `https://www.themoviedb.org/t/p/w500${path}`\n  //   : 'https://www.mysafetysign.com/img/lg/S/post-no-bills-sign-st-0124.png';\n}\n\nexport function getMarkupImgPoster(poster_path, name, title) {\n  return poster_path\n    ? `<img src=\" ${getPosterPath(poster_path)}\" alt=\"${\n        name || title\n      }\" loading=\"lazy\" />`\n    : ``;\n}\n","import { renderCards } from './renderCardsMyLibrary';\nimport { spiner, spinerRemove, noInfo } from '../js/notifications';\nimport { getPagination } from './pagination';\n\n// const watchedBtn = document.querySelector('.js-watched');\n// const queuedBtn = document.querySelector('.js-queue');\n// watchedBtn.addEventListener('click', onWatchedBtn);\n// queuedBtn.addEventListener('click', onQueuedBtn);\n\nconst WATCHED = 'movies-watched';\nconst QUEUE = 'movies-queue';\n// Заглушки порожньої сторінки\nconst img = document.querySelector('.empty__page');\nconst text = document.querySelector('.empty__page-text');\nlet curPage = 1;\nconst libPageSize = 18;\n\nexport function onWatchedBtn(page = 0) {\n  if (page) curPage = page;\n\n  img.classList.add('is-hidden');\n  text.classList.add('is-hidden');\n\n  spiner();\n  const obj = JSON.parse(localStorage.getItem(WATCHED));\n  if (obj?.length) {\n    calcLibSize(obj);\n  } else {\n    img.classList.remove('is-hidden');\n    text.classList.remove('is-hidden');\n    spinerRemove();\n  }\n  // watchedBtn.removeEventListener('click', onWatchedBtn);\n}\n\nexport function onQueuedBtn(page = 0) {\n  if (page) curPage = page;\n\n  img.classList.add('is-hidden');\n  text.classList.add('is-hidden');\n\n  spiner();\n  const obj = JSON.parse(localStorage.getItem(QUEUE));\n  if (obj?.length) {\n    calcLibSize(obj);\n  } else {\n    img.classList.remove('is-hidden');\n    text.classList.remove('is-hidden');\n    spinerRemove();\n  }\n  // queuedBtn.removeEventListener('click', onQueuedBtn);\n}\n\nfunction calcLibSize(arr) {\n  let lastPage = null;\n\n  if (arr.length <= libPageSize) {\n    renderCards(arr);\n    spinerRemove();\n  }\n\n  // Визначення останньої сторінки\n  if (arr.length % libPageSize)\n    lastPage = Math.floor(arr.length / libPageSize) + 1;\n  else lastPage = arr.length / libPageSize;\n\n  // Рендер відповідної сторінки\n  if (curPage === lastPage) {\n    renderCards(arr.slice(curPage * libPageSize - libPageSize, arr.length));\n    spinerRemove();\n  } else {\n    renderCards(\n      arr.slice(curPage * libPageSize - libPageSize, curPage * libPageSize)\n    );\n    spinerRemove();\n  }\n  getPagination(curPage, lastPage, true);\n}\n"],"names":["$dNYR7","parcelRequire","$07b0d4a19403df81$export$e483d52d8d6686e1","obj","markup","map","O","id","poster_path","name","title","path","string","length","substr","$07b0d4a19403df81$export$a01ab454399a8a2c","genreIds","newArr","$07b0d4a19403df81$export$b988f5599209187e","genre","push","slisedArr","slice","$07b0d4a19403df81$export$f161907cccfac066","genres","date","release_date","split","join","$865c390aa2d1ad34$export$21666b427502ea6d","cardHolderLibrary","innerHTML","$1da9f0d39b27fa95$var$img","document","querySelector","$1da9f0d39b27fa95$var$text","$1da9f0d39b27fa95$var$curPage","$1da9f0d39b27fa95$var$libPageSize","$1da9f0d39b27fa95$export$f7660da9a1a3fc30","page","classList","add","$aYvV9","spiner","JSON","parse","localStorage","getItem","$1da9f0d39b27fa95$var$calcLibSize","remove","spinerRemove","$1da9f0d39b27fa95$export$25632d83bbfd321f","arr","lastPage","Math","floor","$jcFG7","getPagination","footerLink","stickyHeaderMyLibrary","watchedBtn","queuedBtn","movieModal","pagination","$865c390aa2d1ad34$var$apiServise","window","onscroll","pageYOffset","default","addEventListener","$ghnK3","onOpenTeamModal","e","target","currentTarget","contains","$3ozO0","showTrailer","closest","movieId","fetchById","then","data","$1Gwk9","showModal","cards","children","Number","nodeName","isNaN","query","successPages","$dWD7p","onSubmitScroll"],"version":3,"file":"my-library.eeaf37f5.js.map"}